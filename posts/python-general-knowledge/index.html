
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>python 常识 - Starsea's Note</title>
	<meta name="author" content="starsea">

	
	<meta name="description" content="很多东西都是用 python 写的 比如 brew octopress gae&hellip; 有些东西经常用到, 每次都要查资料 看来有必要记录一些相关的知识. egg egg&hellip;传说中的蟒蛇蛋,是目前最流行的python应用打包部署方式. 1
2
[haidx@mbp:~/repo &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Starsea's Note" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <!--
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	-->
    <script  src="//cdn.staticfile.org/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Starsea's Note</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/about">About</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/about">About</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:starsea.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
		<a class="github" href="https://github.com/starsea" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:starsea.github.io">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">Python 常识</h2>
	<div class="entry-content"><p>很多东西都是用 <code>python</code> 写的 比如 <code>brew</code> <code>octopress</code> <code>gae</code>&hellip; 有些东西经常用到, 每次都要查资料 看来有必要记录一些相关的知识.</p>

<!--more-->


<h2>egg</h2>

<p>egg&hellip;传说中的蟒蛇蛋,是目前最流行的python应用打包部署方式.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>haidx@mbp:~/repo/octopress<span class="o">]</span><span class="nv">$ </span>locate *.egg | head -n 1  | xargs -n 1 file
</span><span class='line'>/Users/haidx/goagent-3.1.5/local/dnslib-0.8.3.egg: Zip archive data, at least v2.0 to extract
</span></code></pre></td></tr></table></div></figure>


<p>执行上述命令发现其实就是一个 zip 打包文件.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>haidx@mbp:~/repo/octopress<span class="o">]</span><span class="nv">$ </span>unzip -l  /Users/haidx/goagent-3.1.5/local/dnslib-0.8.3.egg
</span><span class='line'>Archive:  /Users/haidx/goagent-3.1.5/local/dnslib-0.8.3.egg
</span><span class='line'>  Length     Date   Time    Name
</span><span class='line'> --------    ----   ----    ----
</span><span class='line'>        0  01-22-14 09:07   dnslib/
</span><span class='line'>     1024  10-20-12 01:08   dnslib/bimap.py
</span><span class='line'>     2045  09-13-12 12:51   dnslib/bit.py
</span><span class='line'>     1824  10-20-12 02:24   dnslib/buffer.py
</span><span class='line'>    28011  04-27-13 08:33   dnslib/dns.py
</span><span class='line'>     3953  09-13-12 12:51   dnslib/label.py
</span><span class='line'>        0  01-22-14 09:07   dnslib/server/
</span><span class='line'>     1096  09-13-12 12:51   dnslib/server/circuits_server.py
</span><span class='line'>     1337  10-20-12 01:29   dnslib/server/gevent_server.py
</span><span class='line'>     2263  11-11-12 03:43   dnslib/server/udp_proxy.py
</span><span class='line'>     1389  11-11-12 03:44   dnslib/server/udp_server.py
</span><span class='line'>        0  10-19-12 17:30   dnslib/server/__init__.py
</span><span class='line'>       19  09-13-12 12:51   dnslib/__init__.py
</span><span class='line'>        0  01-22-14 09:07   EGG-INFO/
</span><span class='line'>        1  01-21-14 17:05   EGG-INFO/dependency_links.txt
</span><span class='line'>     6709  01-21-14 17:05   EGG-INFO/PKG-INFO
</span><span class='line'>      386  01-21-14 17:05   EGG-INFO/SOURCES.txt
</span><span class='line'>        7  01-21-14 17:05   EGG-INFO/top_level.txt
</span><span class='line'>        1  01-21-14 17:05   EGG-INFO/zip-safe
</span><span class='line'> --------                   -------
</span><span class='line'>    50065                   19 files
</span></code></pre></td></tr></table></div></figure>


<p>EGG-INFO 一般有五个信息文件.其他的文件都是更加 setup.py 里的 <code>name</code> 寻找要打包的文件夹的名称 然后用 packages 指定的<code>find_packages</code> 打包</p>

<h4>如何移除 egg 包</h4>

<p>非常简单 找到easy-install.pth</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>haidx@mbp:~/tmp/pytest/egg-demo<span class="o">]</span><span class="nv">$ </span>locate easy-install.pth
</span><span class='line'>/Library/Python/2.7/site-packages/easy-install.pth
</span><span class='line'>/Library/Python/2.7/site-packages/easy-install.pth.bak
</span><span class='line'>/usr/local/lib/python2.7/site-packages/easy-install.pth
</span><span class='line'>
</span><span class='line'><span class="o">[</span>haidx@mbp:~/tmp/pytest/egg-demo<span class="o">]</span><span class="nv">$ </span>cat /usr/local/lib/python2.7/site-packages/easy-install.pth
</span><span class='line'>import sys; sys.__plen <span class="o">=</span> len<span class="o">(</span>sys.path<span class="o">)</span>
</span><span class='line'>./setuptools-3.6-py2.7.egg
</span><span class='line'>./pip-1.5.5-py2.7.egg
</span><span class='line'>./rdbtools-0.1.6-py2.7.egg
</span><span class='line'>import sys; <span class="nv">new</span><span class="o">=</span>sys.path<span class="o">[</span>sys.__plen:<span class="o">]</span>; del sys.path<span class="o">[</span>sys.__plen:<span class="o">]</span>; <span class="nv">p</span><span class="o">=</span>getattr<span class="o">(</span>sys,<span class="s1">&#39;__egginsert&#39;</span>,0<span class="o">)</span>; sys.path<span class="o">[</span>p:p<span class="o">]=</span>new; sys.__egginsert <span class="o">=</span> p+len<span class="o">(</span>new<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>首先将包含此egg的行从easy-install.pth中删除，然后删除egg文件夹即可<br/>
这里我用的 brew 安装的 所以在 /user/local 下 上面那个 Library 下的是系统自带的 python.</p>

<h2>easy_install</h2>

<p>当需要安装第三方python包时，可能会用到 <code>easy_install</code>命令它是由 PEAK(Python Enterprise Application Kit) 开发的 <code>setuptools</code> 包里带的一个命令，它用来安装egg包。</p>

<p>如果已经把egg文件下载到了本地，则easy_install xxx.egg就ok了，如果有依赖，则会自动下载安装，省心了。如果没有下载下来，网络安装更爽，直接 easy_install 包名，此时喝点咖啡休息一下，回过神来时已经安装好了。唯一一点不好的感觉是，easy_install现在还不支持自动卸载，网上流传的用 easy_install -m xxx来卸载，是不行了，这个命令式用来安装同一个包的多个版本的。</p>

<h2>setuptools 和 easy_install</h2>

<p>setuptools:setuptools 是一组由PEAK(Python Enterprise Application Kit)开发的 Python 的 distutils 工具的增强工具，可以让程序员更方便的创建和发布 Python的egg 包，特别是那些对其它包具有依赖性的状况。 由 setuptools 创建和发布的包看起来和基于 distutils 发布的包没什么不同。最终用户不需要事先安装 setuptools 甚至根本不需要知道 setuptools 的存在，而程序员也不需要附上完整的 setuptools，只需要包含一个大小约 8K 的ez_setup.py脚本作为启动模块，就可以在最终用户没有安装适当版本的 setuptools 时让这些包自动下载和安装 setuptools。</p>

<p>easy_install: 常使用python的人员，当需要安装第三方python包时,可能会用到这个.
<strong>easy_install是由PEAK(Python Enterprise Application Kit)开发的setuptools包里带的一个命令</strong>
它用来自动的从 <a href="http://pypi.python.org/simple/">http://pypi.python.org/simple/</a> 来安装egg包，相当于perl中的cpan或PPM。</p>

<p><strong>so..我们需要先装 setuptools  才有 easy_install</strong></p>

<p>我们到虚拟机试下(centos 6.2)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo yum install python-setuptools
</span></code></pre></td></tr></table></div></figure>


<p>如果仓库里没有的话 我们可以手动<strong> wget 当前 python 版本对应的 setuptools 的 egg 然后 sh 安装</strong>  <a href="https://pypi.python.org/packages/2.6/s/setuptools/">这里可以找到地址</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>vagrant@localhost ~<span class="o">]</span><span class="nv">$ </span>python -V
</span><span class='line'>Python 2.6.6
</span><span class='line'><span class="o">[</span>vagrant@localhost ~<span class="o">]</span><span class="nv">$ </span>wget http://pypi.python.org/packages/2.6/s/setuptools/setuptools-0.6c11-py2.6.egg#md5<span class="o">=</span>bfa92100bd772d5a213eedd356d64086
</span><span class='line'><span class="o">[</span>vagrant@localhost ~<span class="o">]</span><span class="nv">$ </span>sudo sh setuptools-0.6c11-py2.6.egg
</span></code></pre></td></tr></table></div></figure>


<h2>pip</h2>

<p>&hellip;不写了 看参考文档倒数第二条.</p>

<p>参考文献:</p>

<ul>
<li><a href="http://www.worldhello.net/2010/12/08/2178.html#id8">egg 学习笔记</a></li>
<li><a href="http://www.cnblogs.com/kungfupanda/p/3343113.html">python的egg包的安装和制作</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/linux/l-cppeak3.html">http://www.ibm.com/developerworks/cn/linux/l-cppeak3.html</a></li>
<li><a href="http://blog.csdn.net/shanliangliuxing/article/details/10114911">python中包管理工具(easy_install和pip的用法)</a> <em>这个总结的相当好&hellip;看了这个都不准备继续写了&hellip;.</em></li>
<li><a href="http://stackoverflow.com/questions/3220404/why-use-pip-over-easy-install">http://stackoverflow.com/questions/3220404/why-use-pip-over-easy-install</a></li>
</ul>


<p class='post-footer'>&nbsp;原文地址：<a href='http://starsea.github.io/posts/python-general-knowledge/'>http://starsea.github.io/posts/python-general-knowledge/</a><br/>&nbsp;版权声明：自由转载-非商用-非衍生-保持署名| <a href='http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh'>Creative Commons BY-NC-ND 3.0</a></p>

</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-07-25T17:43:18+08:00" pubdate data-updated="true">Jul 25<span>th</span>, 2014</time></div>
	<div class="tags">


	<a class='category' href='/categories/python/'>python</a>


</div>
	
	<div class="comments"><a href="#disqus_thread">Comments</a></div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		
		<a class="addthis_button_tweet"></a>
		
		
		
	</div>
	
</div>



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2019

    starsea

<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1252952909'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s23.cnzz.com/stat.php%3Fid%3D1252952909' type='text/javascript'%3E%3C/script%3E"));</script></footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'starsea';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://starsea.github.io/posts/python-general-knowledge/';
        var disqus_url = 'http://starsea.github.io/posts/python-general-knowledge/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





</body>
</html>